<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>JSONAPI Suite</title>
  <meta name="description" content="Collection of Ruby libraries for powering JSONAPI-compliant APIs.">

  <link rel="stylesheet" href="/jsonapi_suite/assets/main.css?ref=wh4t3v45">
  <link rel="alternate" type="application/rss+xml" title="JSONAPI Suite" href="/jsonapi_suite/feed.xml">

  <!-- javascript -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

  
</head>


  <body>
    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <header class="navbar navbar-inverse normal" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/jsonapi_suite/" class="navbar-brand">JSONAPI Suite</a>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">
        <li>
          <a class="nav-link" href="/jsonapi_suite/quickstart">Quickstart</a>
        </li>
        <li>
          <a class="nav-link" href="/jsonapi_suite/tutorial">Tutorial</a>
        </li>
        <li>
          <a class="nav-link" href="/jsonapi_suite/concepts">Concepts</a>
        </li>
        <li>
          <a class="nav-link" href="/jsonapi_suite/ruby">Docs</a>
        </li>
        <li>
          <a class="nav-link" href="/jsonapi_suite/js/home">Javascript Client</a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right visible-md visible-lg">
        <li>
          <a href="https://github.com/jsonapi-suite/jsonapi_suite" class="button">Fork on Github</a>
        </li>
      </ul>
    </nav>
  </div>
</header>

        <div class="container">
          <div class="ruby-toc col-md-3">
  <ul>
    <li><a href="/jsonapi_suite/ruby/installation">Installation</a></li>
    <li><a href="/jsonapi_suite/ruby/resources">Understanding Resources</a></li>
    <li>Reads
      <ul>
        <li><a href="/jsonapi_suite/ruby/reads/basic-reads">Basic Reads</a></li>
        <li><a href="/jsonapi_suite/ruby/reads/sorting">Sorting</a></li>
        <li><a href="/jsonapi_suite/ruby/reads/pagination">Pagination</a></li>
        <li><a href="/jsonapi_suite/ruby/reads/filtering">Filtering</a></li>
        <li><a href="/jsonapi_suite/ruby/reads/fieldsets">Fieldsets</a></li>
        <li><a href="/jsonapi_suite/ruby/reads/statistics">Statistics</a></li>
        <li><a href="/jsonapi_suite/ruby/reads/activerecord-associations">ActiveRecord Associations</a></li>
        <li><a href="/jsonapi_suite/ruby/reads/nested">Querying Relationships</a></li>
        <li><a href="/jsonapi_suite/ruby/reads/serializers">Serializers</a></li>
        <li><a href="/jsonapi_suite/ruby/reads/default-behavior">Default Behavior</a></li>
      </ul>
    </li>
    <li>Writes
      <ul>
        <li><a href="/jsonapi_suite/ruby/writes/basic-writes">Basic Writes</a></li>
        <li><a href="/jsonapi_suite/ruby/writes/validations">Validations</a></li>
        <li><a href="/jsonapi_suite/ruby/writes/strong-resources">Strong Resources</a></li>
        <li><a href="/jsonapi_suite/ruby/writes/nested-writes">Nested Writes</a></li>
        <li><a href="/jsonapi_suite/ruby/writes/side-effects">Side Effects</a></li>
      </ul>
    </li>
    <li><a href="/jsonapi_suite/ruby/alternate-datastores">Alternate Datastores</a>
      <ul>
        <li><a href="/jsonapi_suite/ruby/alternate-datastores/elasticsearch">ElasticSearch</a></li>
        <li><a href="/jsonapi_suite/ruby/alternate-datastores/http">HTTP Services</a></li>
        <li><a href="/jsonapi_suite/ruby/alternate-datastores/adapters">Adapters</a></li>
      </ul>
    </li>
    <li><a href="/jsonapi_suite/ruby/scoping-to-current-user">Scoping to Current User</a></li>
    <li><a href="/jsonapi_suite/ruby/backwards-compatibility">Backwards Compatibility</a></li>
    <li><a href="/jsonapi_suite/ruby/swagger">Swagger</a></li>
    <li><a href="/jsonapi_suite/ruby/testing">Integration Testing</a></li>
    <li><a href="/jsonapi_suite/ruby/error-handling">Error Handling</a></li>
  </ul>
</div>

<div class="col-md-8 col-md-offset-1">
  <h3 id="installation">Installation</h3>

  <p>JSONAPI Suite comes with a <a href="http://guides.rubyonrails.org/rails_application_templates.html">Rails Application Template</a> to get you up and running quickly. To apply a template, you can pass either a URL or path to a file.</p>

  <p>To generate a new application with the template:</p>

  <figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>rails new myapp --api -m https://raw.githubusercontent.com/jsonapi-suite/rails_template/master/all.rb</code></pre></figure>

  <p>To run the same generator on an <em>existing</em> application:</p>

  <figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>rails app:template <span class="nv">LOCATION</span><span class="o">=</span>https://raw.githubusercontent.com/jsonapi-suite/rails_template/master/all.rb</code></pre></figure>

  <p>Again, both these commands can be run by downloading <code class="highlighter-rouge">all.rb</code> and
pointing to it on your filesystem:</p>

  <figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>rails new myapp --api -m /path/to/all.rb</code></pre></figure>

  <p>Run <code class="highlighter-rouge">git status</code> to see what the generator did.</p>

  <h3 id="breaking-down-the-generator">Breaking down the generator</h3>

  <p>The generator mostly installs gems and types some boilerplate for you.
But it can be helpful to understand everything that’s going on and
customize to your needs (these are all customizable defaults).
Here’s a line-by-line breakdown to explain what’s going on. Use <code class="highlighter-rouge">git
status</code> to follow along.</p>

  <ul>
    <li><strong>app/controllers/application_controller.rb</strong>
      <ul>
        <li>Mixes in <code class="highlighter-rouge">JsonapiSuite::ControllerMixin</code>. This includes relevant
modules that decorate our controllers with methods like
<code class="highlighter-rouge">render_jsonapi</code>.</li>
        <li>Sets up global error handling, ensuring that we always render a
JSONAPI-compliant <a href="http://jsonapi.org/format/#errors">errors payload</a>.
Errors are handled through a DSL provided by <a href="https://jsonapi-suite.github.io/jsonapi_errorable">jsonapi_errorable</a> - throw an error and use the DSL to customize response codes, messages, etc. In this code we’ll follow a common Rails pattern and respond with <code class="highlighter-rouge">404</code> from <code class="highlighter-rouge">show</code> endpoints when a record is not found in the datastore.</li>
      </ul>
    </li>
    <li><strong>config/routes.rb</strong>
      <ul>
        <li>Configures routing so all our endpoints will be under <code class="highlighter-rouge">/&lt;api_namespace&gt;/v1</code>. The <code class="highlighter-rouge">&lt;api_namespace&gt;</code> is so you can point something like <a href="http://www.haproxy.org">HAProxy</a> to various microservices based on the path. The <code class="highlighter-rouge">v1</code> sets up a simple versioning pattern.</li>
        <li>Adds a <code class="highlighter-rouge">docs</code> resource. This for automatic <a href="https://swagger.io">Swagger</a> documentation. Swagger requires a schema - <code class="highlighter-rouge">swagger.json</code> - that is generated from our <code class="highlighter-rouge">DocsController</code>. For more on this, see the <a href="https://jsonapi-suite.github.io/jsonapi_suite/ruby/swagger">Autodocumentation</a> section.</li>
      </ul>
    </li>
    <li><strong>spec/rails_helper.rb</strong>
      <ul>
        <li>Adds <a href="https://jsonapi-suite.github.io/jsonapi_spec_helpers">jsonapi_spec_helpers</a>. This gives us helper methods like <code class="highlighter-rouge">json_item</code> and <code class="highlighter-rouge">assert_payload</code> that lower the overhead of dealing with verbose JSONAPI responses. See more in the <a href="https://jsonapi-suite.github.io/jsonapi_suite/ruby/testing">Testing</a> section.</li>
        <li><code class="highlighter-rouge">JsonapiErrorable.disable!</code> disables global error handling before
each test. This is because we usually don’t want errors to be
swallowed during tests. You can always turn it back on in a per-test
basis with <code class="highlighter-rouge">JsonapiErrorable.enable!</code></li>
        <li>Adds <a href="https://github.com/DatabaseCleaner/database_cleaner">database_cleaner</a> to ensure a clean database between tests.</li>
        <li>Mixes in <a href="https://github.com/thoughtbot/factory_bot_rails">factory_bot</a> methods. This gives us syntactic sugar of saying <code class="highlighter-rouge">create(:person)</code> instead of <code class="highlighter-rouge">FactoryBot.create(:person)</code>. See more in the <a href="https://jsonapi-suite.github.io/jsonapi_suite/ruby/testing">Testing</a> section.</li>
        <li>Removes some fixture-specific configuration that is now handled by
<code class="highlighter-rouge">database_cleaner</code>.</li>
      </ul>
    </li>
    <li><strong>app/controllers/docs_controller/rb</strong>
      <ul>
        <li>This is the controller that will generate our <a href="https://swagger.io">Swagger</a> schema. It’s using <a href="https://github.com/fotinakis/swagger-blocks">Swagger Blocks</a> and <a href="https://github.com/jsonapi-suite/jsonapi_swagger_helpers">jsonapi_swagger_helpers</a> under-the-hood. To learn more about Swagger documentation, see the the <a href="https://jsonapi-suite.github.io/jsonapi_suite/ruby/swagger">Autodocumentation</a> section.</li>
      </ul>
    </li>
    <li><strong>public/api</strong>
      <ul>
        <li>Adds a <a href="https://jsonapi-suite.github.io/jsonapi_suite/ruby/swagger">Swagger UI</a> to our project.</li>
      </ul>
    </li>
    <li><strong>config/initializers/jsonapi.rb</strong>
      <ul>
        <li>Requires the <code class="highlighter-rouge">ActiveRecord</code> adapter, which comes with the Suite. Comment this line if you’d like
to avoid <code class="highlighter-rouge">ActiveRecord</code>. Learn more in the <a href="https://jsonapi-suite.github.io/jsonapi_suite/ruby/alternate-datastores/adapters">Adapters</a> section.</li>
      </ul>
    </li>
    <li><strong>config/initializers/strong_resources.rb</strong>
      <ul>
        <li>Stores templates that whitelist API inputs. Learn more in the
<a href="https://jsonapi-suite.github.io/jsonapi_suite/ruby/writes/strong-resources">Strong Resources</a> section.</li>
      </ul>
    </li>
    <li><strong>Rakefile</strong>
      <ul>
        <li>Requires the swagger helpers library in order to run
<a href="https://jsonapi-suite.github.io/jsonapi_suite/ruby/backwards-compatibility">backwards-compatibility</a> checks against production.</li>
      </ul>
    </li>
    <li><strong>Gemfile</strong>
      <ul>
        <li>We’ve added some dependencies, most of which are discussed in other
sections:
          <ul>
            <li><code class="highlighter-rouge">jsonapi-rails</code>: used for serialization, this is the
rails-specific extension for <a href="http://jsonapi-rb.org">jsonapi-rb</a></li>
            <li><code class="highlighter-rouge">jsonapi_swagger_helpers</code>: used automatically generating Swagger
documentation.</li>
            <li><code class="highlighter-rouge">jsonapi_spec_helpers</code>: easily deal with complex JSONAPI responses
in tests.</li>
            <li><code class="highlighter-rouge">kaminari</code>: Default pagination gem.</li>
            <li><code class="highlighter-rouge">rspec-rails</code>: Testing framework.</li>
            <li><code class="highlighter-rouge">factory_bot_rails</code>: For easily seeding data in tests.</li>
            <li><code class="highlighter-rouge">faker</code>: for randomizing factory data.</li>
            <li><code class="highlighter-rouge">swagger-diff</code>: for backwards-compatibility checks.</li>
            <li><code class="highlighter-rouge">database_cleaner</code>: for cleaning the DB between tests.</li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</div>

        </div>
      </div>
    </main>
    <div class="main-footer main-footer--dark">
  <div class="container">
    <div class="row">
      <div class="col-sm-4 menu">
        <h3>Overview</h3>
        <ul>
          <li>
            <a href="/jsonapi_suite/quickstart">Quickstart</a>
          </li>
          <li>
            <a href="/jsonapi_suite/tutorial">Tutorial</a>
          </li>
          <li>
            <a href="/jsonapi_suite/concepts">Concepts</a>
          </li>
        </ul>
      </div>
      <div class="col-sm-4 menu">
        <h3>Resources</h3>
        <ul>
          <li>
            <a target="_blank" href="https://jsonapi-suite.github.io/jsonapi_compliable">YARD Documentation</a>
          </li>
          <li>
            <a target="_blank" href="https://join.slack.com/t/jsonapi-suite/shared_invite/enQtMjkyMTA3MDgxNTQzLWVkMDM3NTlmNTIwODY2YWFkMGNiNzUzZGMzOTY3YmNmZjBhYzIyZWZlZTk4YmI1YTI0Y2M0OTZmZGYwN2QxZjg">Slack Chat</a>
          </li>
          <li>
            <a href="mailto:richmolj@gmail.com">Contact us</a>
          </li>
        </ul>
      </div>
      <div class="col-sm-4 menu">
        <h3>Related</h3>
        <ul>
          <li>
            <a target="_blank" href="http://jsonapi.org">JSONAPI Spec</a>
          </li>
          <li>
            <a target="_blank" href="http://jsonapi-rb.org">jsonapi-rb</a>
          </li>
          <li>
            <a target="_blank" href="https://vuejs.org/">VueJS</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <script type="text/javascript">
$(function () {

  var flipTabs = function() {
    var isTS = true;
    if (localStorage.getItem('js-lang') === 'javascript') {
      isTS = false;
    }

    $('.code-tabs').each(function(index, el) {
      if (isTS) {
        console.log('hiding js');
        $($(el).children()[1]).hide();
        $($(el).children()[0]).show();
      } else {
        console.log('hiding ts');
        $($(el).children()[0]).hide();
        $($(el).children()[1]).show();
      }
    });

    if (isTS) {
      $('.tab.typescript').addClass('active');
      $('.tab.javascript').removeClass('active');
    } else {
      $('.tab.typescript').removeClass('active');
      $('.tab.javascript').addClass('active');
    }
  }

  $('.tab').click(function() {
    console.log('HEREERERE');
    if ($(this).hasClass('typescript')) {
      localStorage.setItem('js-lang', 'typescript');
    } else {
      localStorage.setItem('js-lang', 'javascript');
    }

    flipTabs();
  });

  flipTabs();
})
</script>

  </body>
</html>
